<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>API Documentation</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            padding: 20px;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            display: flex;
        }
        .quick-menu {
            flex: 1;
            margin-right: 20px;
            position: sticky;
            top: 20px;
            height: fit-content;
        }
        .quick-menu ul {
            list-style: none;
            padding: 0;
        }
        .quick-menu li {
            margin-bottom: 10px;
        }
        .quick-menu a {
            text-decoration: none;
            color: #3498db;
        }
        .content {
            flex: 3;
        }
        h1, h2 {
            color: #3498db;
            font-size: 1.8em;
        }
        h3 {
            color: #070707;
            font-size: 1.2em;
            text-decoration: underline;
        }
        pre {
            background: #f4f4f4;
            padding: 10px;
            border: 1px solid #ddd;
        }
        code {
            font-family: monospace;
        }
        .indent {
            margin-left: 20px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="quick-menu">
            <h2>Quick Menu</h2>
            <ul>
                <li><a href="#auth-routes">Auth Routes</a></li>
                <li><a href="#user-routes">User Routes</a></li>
                <li><a href="#upload-routes">Upload Routes</a></li>
                <li><a href="#profile-routes">Profile Routes</a></li>
                <li><a href="#friendship-routes">Friendship Routes</a></li>
                <li><a href="#chat-room-routes">Chat Room Routes</a></li>
            </ul>
        </div>
        <div class="content">
            <h1>API Documentation</h1>

            <h2 id="auth-routes">Auth Routes</h2>
              
              <h3>POST /v1/api/auth/signup</h3>
              <div class="indent">
                  <p><strong>Description:</strong> Register a new user.</p>
                  <p><strong>URL:</strong> <code>/v1/api/auth/signup</code></p>
                  <p><strong>Method:</strong> POST</p>
                  <p><strong>Headers:</strong></p>
                  <pre><code>x-client-id: &lt;client_id&gt;</code></pre>
                  <p><strong>Request Body:</strong></p>
                  <pre><code>{
        "name": "string (required)",
        "password": "string (required, min: 8, max: 30)",
        "email": "string (required, valid email)"
      }</code></pre>
                  <p><strong>Responses:</strong></p>
                  <pre><code>201 CREATED:
      {
        "message": "User created successfully",
        "metadata": { ...userDetails }
      }</code></pre>
              </div>

              <h3>POST /v1/api/auth/signin</h3>
              <div class="indent">
                  <p><strong>Description:</strong> Sign in an existing user.</p>
                  <p><strong>URL:</strong> <code>/v1/api/auth/signin</code></p>
                  <p><strong>Method:</strong> POST</p>
                  <p><strong>Headers:</strong></p>
                  <pre><code>x-client-id: &lt;client_id&gt;</code></pre>
                  <p><strong>Request Body:</strong></p>
                  <pre><code>{
        "password": "string (required, min: 8, max: 30)",
        "email": "string (required, valid email)"
      }</code></pre>
                  <p><strong>Responses:</strong></p>
                  <pre><code>200 OK:
      {
        "message": "User signed in successfully",
        "metadata": { ...userDetails }
      }</code></pre>
              </div>

              <h3>POST /v1/api/auth/change-password</h3>
              <div class="indent">
                  <p><strong>Description:</strong> Change user's password</p>
                  <p><strong>URL:</strong> <code>/v1/api/auth/change-password</code></p>
                  <p><strong>Method:</strong> POST</p>
                  <p><strong>Headers:</strong></p>
                  <pre><code>authorization: Bearer &lt;token&gt;</code></pre>
                  <p><strong>Request Body:</strong></p>
                  <pre><code>{
        "old_password": "string (required)",
        "new_password": "string (required, min 8, max 30)"
      }</code></pre>
                  <p><strong>Responses:</strong></p>
                  <pre><code>200 OK:
      {
        "message": "Change password successfully",
        "metadata": { ...changePasswordDetails }
      }</code></pre>
              </div>

              <h3>POST /v1/api/auth/forget-password</h3>
              <div class="indent">
                  <p><strong>Description:</strong> Forget password</p>
                  <p><strong>URL:</strong> <code>/v1/api/auth/forget-password</code></p>
                  <p><strong>Method:</strong> POST</p>
                  <p><strong>Headers:</strong></p>
                  <pre><code>authorization: Bearer &lt;token&gt;
x-client-id: &lt;client_id&gt;</code></pre>
                  <p><strong>Request Body:</strong></p>
                  <pre><code>{
        "new_password": "string (required, min 8, max 30)"
      }</code></pre>
                  <p><strong>Responses:</strong></p>
                  <pre><code>200 OK:
      {
        "message": "Change password successfully",
        "metadata": { ...signOutDetails }
      }</code></pre>
              </div>

              <h2 id="user-routes">User Routes</h2>

              <h3>POST /v1/api/user/send-otp-change-password</h3>
              <div class="indent">
                  <p><strong>Description:</strong> Send OTP to user's email for change password. User must login and use accessToken to use that api.</p>
                  <p><strong>URL:</strong> <code>/v1/api/user/send-otp-change-password</code></p>
                  <p><strong>Method:</strong> POST</p>
                  <p><strong>Headers:</strong></p>
                  <pre><code>authorization: Bearer &lt;token&gt;</code></pre>
                  <p><strong>Responses:</strong></p>
                  <pre><code>200 OK:
      {
        "message": "Email sent successfully for change password",
        "metadata": { ...otpDetails }
      }</code></pre>
              </div>

              <h3>POST /v1/api/user/send-otp</h3>
              <div class="indent">
                  <p><strong>Description:</strong> Send OTP to user's email for either new user registration or password reset.</p>
                  <p><strong>URL:</strong> <code>/v1/api/user/send-otp</code></p>
                  <p><strong>Method:</strong> POST</p>
                  <p><strong>Headers:</strong></p>
                  <pre><code>x-client-id: &lt;client_id&gt;</code></pre>
                  <p><strong>Request Body:</strong></p>
                  <pre><code>{
        "email": "string (required, valid email)",
        "type": "string (required, 'new-user' or 'reset-password')"
      }</code></pre>
                  <p><strong>Responses:</strong></p>
                  <pre><code>200 OK:
      {
        "message": "Email sent successfully for new user",
        "metadata": { ...otpDetails }
      }</code></pre>
              </div>

              <h3>POST /v1/api/user/check-otp</h3>
              <div class="indent">
                  <p><strong>Description:</strong> Verify the OTP sent to the user's email.</p>
                  <p><strong>URL:</strong> <code>/v1/api/user/check-otp</code></p>
                  <p><strong>Method:</strong> POST</p>
                  <p><strong>Headers:</strong></p>
                  <pre><code>x-client-id: &lt;client_id&gt;</code></pre>
                  <p><strong>Request Body:</strong></p>
                  <pre><code>{
        "email": "string (required, valid email)",
        "otp": "string (required)",
        "type": "string (required, 'new-user' or 'reset-password' or 'change-password')"
      }</code></pre>
                  <p><strong>Responses:</strong></p>
                  <pre><code>200 OK:
      {
        "message": "OTP verified successfully",
        "metadata": { 
          otp: {},
          user_id: "string",
          tokens: { // If type is 'change-password' or 'reset-password'
            accessToken: "string",
            refreshToken: "string"
          }
        }
      }</code></pre>
              </div>

              <h2 id="upload-routes">Upload Routes</h2>
              
              <h3>POST /v1/api/upload/image/avatar</h3>
              <div class="indent">
                  <p><strong>Description:</strong> Upload an avatar image for the user.</p>
                  <p><strong>URL:</strong> <code>/v1/api/upload/image/avatar</code></p>
                  <p><strong>Method:</strong> POST</p>
                  <p><strong>Headers:</strong></p>
                  <pre><code>authorization: Bearer &lt;token&gt;
x-client-id: &lt;client_id&gt;</code></pre>
                  <p><strong>Request:</strong></p>
                  <pre><code>Form Data:
        - file: Image file (required)
      </code></pre>
                  <p><strong>Responses:</strong></p>
                  <pre><code>200 OK:
      {
        "message": "Upload file successfully",
        "metadata": { ...uploadDetails }
      }
      404 Not Found:
      {
        "message": "File not found"
      }</code></pre>
              </div>

              <h2 id="profile-routes">Profile Routes</h2>
              
              <h3>GET /v1/api/profile/info/:user_id</h3>
              <div class="indent">
                  <p><strong>Description:</strong> Get user profile information.</p>
                  <p><strong>URL:</strong> <code>/v1/api/profile/info</code></p>
                  <p><strong>Method:</strong> GET</p>
                  <p><strong>Headers:</strong></p>
                  <pre><code>authorization: Bearer &lt;token&gt;
x-client-id: &lt;client_id&gt;</code></pre>
                  <p><strong>Responses:</strong></p>
                  <pre><code>200 OK:
      {
        "message": "Get user profile successfully",
        "metadata": { ...profileDetails }
      }</code></pre>
    </div>

              <h3>PATCH /v1/api/profile/updateInfo</h3>
              <div class="indent">
                  <p><strong>Description:</strong> Update user profile information.</p>
                  <p><strong>URL:</strong> <code>/v1/api/profile/updateInfo</code></p>
                  <p><strong>Method:</strong> PUT</p>
                  <p><strong>Headers:</strong></p>
                  <pre><code>authorization: Bearer &lt;token&gt;
x-client-id: &lt;client_id&gt;</code></pre>
                  <p><strong>Request Body:</strong></p>
                  <pre><code>{
          "name": "string (optional, min: 3, max: 30)",
          "phone": "string (optional, min: 10, max: 20)",
          "gender": "string (optional)",
          "roles": ["string"]
          }</code></pre>
                  <p><strong>Responses:</strong></p>
                  <pre><code>200 OK:
          {
          "message": "Update information successfully",
          "metadata": { ...updatedDetails }
          }

          400 Bad Request:
          {
          "message": "Validation error message"
          }</code></pre>
              </div>

              <h2 id="friendship-routes">Friendship Routes</h2>
              
              <h3>GET /v1/api/friends/list/all</h3>
              <div class="indent">
                  <p><strong>Description:</strong> Get a list of all friends.</p>
                  <p><strong>URL:</strong> <code>/v1/api/friends/list/all</code></p>
                  <p><strong>Method:</strong> GET</p>
                  <p><strong>Headers:</strong></p>
                  <pre><code>authorization: Bearer &lt;token&gt;
x-client-id: &lt;client_id&gt;</code></pre>
                  <p><strong>Responses:</strong></p>
                  <pre><code>200 OK:
      {
        "message": "List of friends",
        "metadata": { ...friendsList }
      }</code></pre>
              </div>

              <h3>GET /v1/api/friends/list/requests</h3>
              <div class="indent">
                  <p><strong>Description:</strong> Get a list of all friend requests.</p>
                  <p><strong>URL:</strong> <code>/v1/api/friends/list/requests</code></p>
                  <p><strong>Method:</strong> GET</p>
                  <p><strong>Headers:</strong></p>
                  <pre><code>authorization: Bearer &lt;token&gt;
x-client-id: &lt;client_id&gt;</code></pre>
                  <p><strong>Responses:</strong></p>
                  <pre><code>200 OK:
      {
        "message": "List of friend requests",
        "metadata": { ...friendRequests }
      }</code></pre>
              </div>

              <h3>POST /v1/api/friends/send-request</h3>
              <div class="indent">
                  <p><strong>Description:</strong> Send a friend request to another user.</p>
                  <p><strong>URL:</strong> <code>/v1/api/friends/send-request</code></p>
                  <p><strong>Method:</strong> POST</p>
                  <p><strong>Headers:</strong></p>
                  <pre><code>authorization: Bearer &lt;token&gt;
x-client-id: &lt;client_id&gt;</code></pre>
                  <p><strong>Request Body:</strong></p>
                  <pre><code>{
        "user_id_recieve": "string (required)"
      }</code></pre>
                  <p><strong>Responses:</strong></p>
                  <pre><code>200 OK:
      {
        "message": "Friend request sent",
        "metadata": { ...friendRequestDetails }
      }</code></pre>
              </div>

              <h3>POST /v1/api/friends/accept-request</h3>
              <div class="indent">
                  <p><strong>Description:</strong> Accept a friend request.</p>
                  <p><strong>URL:</strong> <code>/v1/api/friends/accept-request</code></p>
                  <p><strong>Method:</strong> POST</p>
                  <p><strong>Headers:</strong></p>
                  <pre><code>authorization: Bearer &lt;token&gt;
x-client-id: &lt;client_id&gt;</code></pre>
                  <p><strong>Request Body:</strong></p>
                  <pre><code>{
        "request_id": "string (required)"
      }</code></pre>
                  <p><strong>Responses:</strong></p>
                  <pre><code>200 OK:
      {
        "message": "Friend request accepted",
        "metadata": { ...acceptRequestDetails }
      }</code></pre>
              </div>

              <h3>POST /v1/api/friends/cancel-request</h3>
              <div class="indent">
                  <p><strong>Description:</strong> Cancel a friend request.</p>
                  <p><strong>URL:</strong> <code>/v1/api/friends/cancel-request</code></p>
                  <p><strong>Method:</strong> POST</p>
                  <p><strong>Headers:</strong></p>
                  <pre><code>authorization: Bearer &lt;token&gt;
x-client-id: &lt;client_id&gt;</code></pre>
                  <p><strong>Request Body:</strong></p>
                  <pre><code>{
        "request_id": "string (required)"
      }</code></pre>
                  <p><strong>Responses:</strong></p>
                  <pre><code>200 OK:
      {
        "message": "Friend request canceled",
        "metadata": { ...cancelRequestDetails }
      }</code></pre>
              </div>

              <h2 id="chat-room-routes">Chat Room Routes</h2>

              <h3>POST /v1/api/room/create</h3>
              <div class="indent">
                  <p><strong>Description:</strong> Create a new chat room.</p>
                  <p><strong>URL:</strong> <code>/v1/api/room/create</code></p>
                  <p><strong>Method:</strong> POST</p>
                  <p><strong>Headers:</strong></p>
                  <pre><code>authorization: Bearer &lt;token&gt;
x-client-id: &lt;client_id&gt;</code></pre>
                  <p><strong>Request Body:</strong></p>
                  <pre><code>{
        "name": "string",
        "avt_url": "string",
        "user_ids": ["string (required)"]
      }</code></pre>
                  <p><strong>Responses:</strong></p>
                  <pre><code>201 Created:
      {
        "message": "Room created successfully",
        "metadata": {
          "name": "string",
          "avt_url": "string",
          "user_ids": ["string"],
          "is_group": boolean,
          "_id": "string",
          "createdAt": "string",
          "updatedAt": "string",
          "__v": 0
        }
      }</code></pre>
              </div>

              <h3>GET /v1/api/room/new-messages</h3>
              <div class="indent">
                  <p><strong>Description:</strong> Get new messages in each room.</p>
                  <p><strong>URL:</strong> <code>/v1/api/room/new-messages</code></p>
                  <p><strong>Method:</strong> GET</p>
                  <p><strong>Headers:</strong></p>
                  <pre><code>authorization: Bearer &lt;token&gt;
x-client-id: &lt;client_id&gt;</code></pre>
                  <p><strong>Responses:</strong></p>
                  <pre><code>200 OK:
      {
        "message": "New messages retrieved successfully",
        "metadata": {
          "messages": [
            {
              "user_id": "string",
              "message": "string",
              "updated_at": "string",
              "created_at": "string",
              "status": "string",
              "room_id": "string",
              "is_group": boolean,
              "user_name": "string",
              "user_avatar": "string",
              "user_avatar_thumb": "string",
              "room_avatar": "string",
              "room_name": "string",
              "room_user_ids": ["string"]
            }
          ]
        }
      }</code></pre>
              </div>

              <h3>GET /v1/api/room/messages/:room_id</h3>
              <div class="indent">
                  <p><strong>Description:</strong> Get messages in a specific room.</p>
                  <p><strong>URL:</strong> <code>/v1/api/room/messages/:room_id</code></p>
                  <p><strong>Method:</strong> GET</p>
                  <p><strong>Headers:</strong></p>
                  <pre><code>authorization: Bearer &lt;token&gt;
x-client-id: &lt;client_id&gt;</code></pre>
                  <p><strong>Query Parameters:</strong></p>
                  <pre><code>page: integer
      limit: integer</code></pre>
                  <p><strong>Responses:</strong></p>
                  <pre><code>200 OK:
      {
        "message": "Messages retrieved successfully",
        "metadata": {
          "messages": [
            {
              "user_id": "string",
              "message": "string",
              "updated_at": "string",
              "created_at": "string",
              "status": "string",
              "room_id": "string",
              "is_group": boolean,
              "user_name": "string",
              "user_avatar": "string",
              "user_avatar_thumb": "string",
              "room_avatar": "string",
              "room_name": "string",
              "room_user_ids": ["string"]
            }
          ],
          "currentPage": integer,
          "totalPages": integer,
          "amount": integer,
          "totalMessages": integer,
          "hasNextPage": boolean,
          "hasPrevPage": boolean
        }
      }</code></pre>
              </div>

              <h3>POST /v1/api/room/add-users/:room_id</h3>
              <div class="indent">
                  <p><strong>Description:</strong> Add users to a chat room.</p>
                  <p><strong>URL:</strong> <code>/v1/api/room/add-users/:room_id</code></p>
                  <p><strong>Method:</strong> POST</p>
                  <p><strong>Headers:</strong></p>
                  <pre><code>authorization: Bearer &lt;token&gt;
x-client-id: &lt;client_id&gt;</code></pre>
                  <p><strong>Request Body:</strong></p>
                  <pre><code>{
        "user_ids": ["string (required)"]
      }</code></pre>
                  <p><strong>Responses:</strong></p>
                  <pre><code>200 OK:
      {
        "message": "Users added to room successfully",
        "metadata": {
          "room_id": "string",
          "room_name": "string",
          "room_avatar": "string",
          "is_group": boolean,
          "room_user_ids": ["string"]
        }
      }</code></pre>
      </body>
      </html>
    ```