<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chat Room Routes</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <div class="quick-menu">
            <h2>Quick Menu</h2>
            <ul>
                <li><a href="index.html">Home</a></li>
                <li><a href="auth-routes.html">Auth Routes</a></li>
                <li><a href="user-routes.html">User Routes</a></li>
                <li><a href="upload-routes.html">Upload Routes</a></li>
                <li><a href="profile-routes.html">Profile Routes</a></li>
                <li><a href="friendship-routes.html">Friendship Routes</a></li>
                <li><a href="chat-room-routes.html">Chat Room Routes</a></li>
            </ul>
        </div>
        <div class="content">
            <h3>POST /v1/api/room/search</h3>
<div class="indent">
    <p><strong>Description:</strong> Search for chat rooms based on a filter.</p>
    <p><strong>URL:</strong> <code>/v1/api/room/search</code></p>
    <p><strong>Method:</strong> POST</p>
    <p><strong>Headers:</strong></p>
    <pre><code>authorization: &lt;token&gt;
x-client-id: &lt;client_id&gt;</code></pre>
    <p><strong>Request Body:</strong></p>
    <pre><code>{
    "filter": "string (required)"
}</code></pre>
    <p><strong>Response:</strong></p>
    <pre><code>200 OK:
{
    "message": "Room searched successfully",
    "metadata": [
        {
            "room_id": "string",
            "room_name": "string",
            "is_group": boolean,
            "room_user_ids": ["string"],
            "room_avatar": "string"
        }
    ]
}</code></pre>
</div>

            <h1>Chat Room Routes</h1>

            <h3>GET /v1/api/room/:room_id</h3>
            <div class="indent">
                <p><strong>Description:</strong> Retrieve details of a specific chat room.</p>
                <p><strong>URL:</strong> <code>/v1/api/room/:room_id</code></p>
                <p><strong>Method:</strong> GET</p>
                <p><strong>Headers:</strong></p>
                <pre><code>authorization: &lt;token&gt;
x-client-id: &lt;client_id&gt;</code></pre>
                <p><strong>Response:</strong></p>
                <pre><code>200 OK:
{
    "message": "Room detail retrieved successfully",
    "status": 200,
    "metadata": {
        "room_id": "66981da2388da84552594a90",
        "room_name": "Thịnh Trần",
        "is_group": false,
        "room_user_ids": [
            "6697de6d3786fe3f2bc2c125",
            "668a4c9c1174c565154564c6"
        ],
        "room_avatar": "https://res.cloudinary.com/dha0su2r2/image/upload/c_fill,h_250,w_250/v1/avatar/6697de6d3786fe3f2bc2c125/6697de6d3786fe3f2bc2c125_1722718769419.jpg?_a=BAMADKZU0"
    }
}</code></pre>
            </div>

            <h3>PATCH /v1/api/room/:room_id</h3>
            <div class="indent">
                <p><strong>Description:</strong> Update details of a specific chat room.</p>
                <p><strong>URL:</strong> <code>/v1/api/room/:room_id</code></p>
                <p><strong>Method:</strong> PATCH</p>
                <p><strong>Headers:</strong></p>
                <pre><code>authorization: &lt;token&gt;
x-client-id: &lt;client_id&gt;</code></pre>
                <p><strong>Request Body:</strong></p>
                <pre><code>{
    "name": "string (optional)",
    "avt_url": "string (optional)"
}</code></pre>
                <p><strong>Response:</strong></p>
                <pre><code>200 OK:
{
    "message": "Room updated successfully",
    "status": 200,
    "metadata": {
        "room_id": "66981da2388da84552594a90",
        "room_name": "Thịnh Trann",
        "is_group": false,
        "room_user_ids": [
            "6697de6d3786fe3f2bc2c125",
            "668a4c9c1174c565154564c6"
        ],
        "room_avatar": "https://res.cloudinary.com/dha0su2r2/image/upload/c_fill,h_250,w_250/v1/avatar/6697de6d3786fe3f2bc2c125/6697de6d3786fe3f2bc2c125_1722718769419.jpg?_a=BAMADKZU0"
    }
}</code></pre>

            <h3>POST /v1/api/room/create</h3>
            <div class="indent">
                <p><strong>Description:</strong> Create a new chat room.</p>
                <p><strong>URL:</strong> <code>/v1/api/room/create</code></p>
                <p><strong>Method:</strong> POST</p>
                <p><strong>Headers:</strong></p>
                <pre><code>authorization: &lt;token&gt;
x-client-id: &lt;client_id&gt;</code></pre>
                <p><strong>Request Body:</strong></p>
                <pre><code>{
    "name": "string",
    "avt_url": "string",
    "user_ids": ["string (required)"]
}</code></pre>
                <p><strong>Responses:</strong></p>
                <pre><code>201 Created:
{
    "message": "Room created successfully",
    "metadata": {
        "name": "string",
        "avt_url": "string",
        "user_ids": ["string"],
        "is_group": boolean,
        "_id": "string",
        "createdAt": "string",
        "updatedAt": "string",
        "__v": 0
    }
}</code></pre>
            </div>

            <h3>GET /v1/api/room/new-messages</h3>
            <div class="indent">
                <p><strong>Description:</strong> Get new messages in each room.</p>
                <p><strong>URL:</strong> <code>/v1/api/room/new-messages</code></p>
                <p><strong>Method:</strong> GET</p>
                <p><strong>Headers:</strong></p>
                <pre><code>authorization: &lt;token&gt;
x-client-id: &lt;client_id&gt;</code></pre>
                <p><strong>Responses:</strong></p>
                <pre><code>200 OK:
{
    "message": "New messages retrieved successfully",
    "metadata": {
        "messages": [
            {
                "room": {
                    "room_id": "string",
                    "room_name": "string",
                    "room_avatar": "string",
                    "is_group": boolean,
                    "room_user_ids": ["string"]
                },
                "newMessage": {
                    "user_id": "string",
                    "message": "string",
                    "updated_at": "string",
                    "created_at": "string",
                    "user_name": "string",
                    "user_avatar": "string",
                    "user_avatar_thumb": "string"
                }
            },
            {
                "room": {
                    "room_id": "string",
                    "room_name": "string",
                    "room_avatar": "string",
                    "is_group": boolean,
                    "room_user_ids": ["string"]
                }
            }
        ]
    }
}</code></pre>
            </div>

            <h3>GET /v1/api/room/messages/:room_id</h3>
            <div class="indent">
                <p><strong>Description:</strong> Get messages in a specific room.</p>
                <p><strong>URL:</strong> <code>/v1/api/room/messages/:room_id</code></p>
                <p><strong>Method:</strong> GET</p>
                <p><strong>Headers:</strong></p>
                <pre><code>authorization: &lt;token&gt;
x-client-id: &lt;client_id&gt;</code></pre>
                <p><strong>Query Parameters:</strong></p>
                <pre><code>page: integer
limit: integer</code></pre>
                <p><strong>Responses:</strong></p>
                <pre><code>200 OK:
{
    "message": "Messages retrieved successfully",
    "metadata": {
        "messages": [
            {
                "user_id": "string",
                "message": "string",
                "updated_at": "string",
                "created_at": "string",
                "status": "string",
                "room_id": "string",
                "is_group": boolean,
                "user_name": "string",
                "user_avatar": "string",
                "user_avatar_thumb": "string",
                "room_avatar": "string",
                "room_name": "string",
                "room_user_ids": ["string"]
            }
        ],
        "currentPage": integer,
        "totalPages": integer,
        "amount": integer,
        "totalMessages": integer,
        "hasNextPage": boolean,
        "hasPrevPage": boolean
    }
}</code></pre>
            </div>

            <h3>POST /v1/api/room/add-users/:room_id</h3>
            <div class="indent">
                <p><strong>Description:</strong> Add users to a chat room.</p>
                <p><strong>URL:</strong> <code>/v1/api/room/add-users/:room_id</code></p>
                <p><strong>Method:</strong> POST</p>
                <p><strong>Headers:</strong></p>
                <pre><code>authorization: &lt;token&gt;
x-client-id: &lt;client_id&gt;</code></pre>
                <p><strong>Request Body:</strong></p>
                <pre><code>{
    "user_ids": ["string (required)"]
}</code></pre>
                <p><strong>Responses:</strong></p>
                <pre><code>200 OK:
{
    "message": "Users added to room successfully",
    "metadata": {
        "room_id": "string",
        "room_name": "string",
        "room_avatar": "string",
        "is_group": boolean,
        "room_user_ids": ["string"]
    }
}</code></pre>
            </div>
        </div>
    </div>
</body>
</html>
